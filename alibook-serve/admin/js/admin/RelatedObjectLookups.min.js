!function(e){"use strict";function t(e){return e=e.replace(/\./g,"__dot__"),e=e.replace(/\-/g,"__dash__")}function n(e){return e=e.replace(/__dot__/g,"."),e=e.replace(/__dash__/g,"-")}function o(e,n,o){var a=e.id.replace(n,"");a=t(a);var i=e.href;o&&(-1===i.indexOf("?")?i+="?_popup=1":i+="&_popup=1");return window.open(i,a,"height=500,width=800,resizable=yes,scrollbars=yes").focus(),!1}function a(e){return o(e,/^lookup_/,!0)}function i(e){return o(e,/^(change|add|delete)_/,!1)}function d(t){var n=e(t),o=n.nextAll(".view-related, .change-related, .delete-related");if(o.length){var a=n.val();a?o.each(function(){var t=e(this);t.attr("href",t.attr("data-href-template").replace("__fk__",a))}):o.removeAttr("href")}}function r(t,o,a){var i=n(t.name),d=document.getElementById(i);if(d){var r=d.nodeName.toUpperCase();"SELECT"===r?d.options[d.options.length]=new Option(a,o,!0,!0):"INPUT"===r&&(-1!==d.className.indexOf("vManyToManyRawIdAdminField")&&d.value?d.value+=","+o:d.value=o),e(d).trigger("change")}else{var l=i+"_to",s=new Option(a,o);SelectBox.add_to_cache(l,s),SelectBox.redisplay(l)}t.close()}window.id_to_windowname=t,window.windowname_to_id=n,window.showRelatedObjectLookupPopup=a,window.dismissRelatedLookupPopup=function(e,t){var o=n(e.name),a=document.getElementById(o);-1!==a.className.indexOf("vManyToManyRawIdAdminField")&&a.value?a.value+=","+t:document.getElementById(o).value=t,e.close()},window.showRelatedObjectPopup=i,window.updateRelatedObjectLinks=d,window.dismissAddRelatedObjectPopup=r,window.dismissChangeRelatedObjectPopup=function(t,o,a,i){var d=n(t.name).replace(/^edit_/,""),r=interpolate("#%s, #%s_from, #%s_to",[d,d,d]),l=e(r);l.find("option").each(function(){this.value===o&&(this.textContent=a,this.value=i)}),l.next().find(".select2-selection__rendered").each(function(){this.lastChild.textContent=a,this.title=a}),t.close()},window.dismissDeleteRelatedObjectPopup=function(t,o){var a=n(t.name).replace(/^delete_/,""),i=interpolate("#%s, #%s_from, #%s_to",[a,a,a]);e(i).find("option").each(function(){this.value===o&&e(this).remove()}).trigger("change"),t.close()},window.showAddAnotherPopup=i,window.dismissAddAnotherPopup=r,e(document).ready(function(){e("a[data-popup-opener]").on("click",function(t){t.preventDefault(),opener.dismissRelatedLookupPopup(window,e(this).data("popup-opener"))}),e("body").on("click",".related-widget-wrapper-link",function(t){if(t.preventDefault(),this.href){var n=e.Event("django:show-related",{href:this.href});e(this).trigger(n),n.isDefaultPrevented()||i(this)}}),e("body").on("change",".related-widget-wrapper select",function(t){var n=e.Event("django:update-related");e(this).trigger(n),n.isDefaultPrevented()||d(this)}),e(".related-widget-wrapper select").trigger("change"),e("body").on("click",".related-lookup",function(t){t.preventDefault();var n=e.Event("django:lookup-related");e(this).trigger(n),n.isDefaultPrevented()||a(this)})})}(django.jQuery);