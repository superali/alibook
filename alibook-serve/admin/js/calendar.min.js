!function(){"use strict";function t(t,e,r){this.div_id=t,this.callback=e,this.today=new Date,this.currentMonth=this.today.getMonth()+1,this.currentYear=this.today.getFullYear(),void 0!==r&&(this.selected=r)}var e={monthsOfYear:[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")],daysOfWeek:[pgettext("one letter Sunday","S"),pgettext("one letter Monday","M"),pgettext("one letter Tuesday","T"),pgettext("one letter Wednesday","W"),pgettext("one letter Thursday","T"),pgettext("one letter Friday","F"),pgettext("one letter Saturday","S")],firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,r){return 1===t||3===t||5===t||7===t||8===t||10===t||12===t?31:4===t||6===t||9===t||11===t?30:2===t&&e.isLeapYear(r)?29:28},draw:function(t,r,n,a,i){function o(t,e){return function(r){r.preventDefault(),a(t,e,this.textContent)}}var s=new Date,u=s.getDate(),c=s.getMonth()+1,h=s.getFullYear(),d="",l=!1;void 0!==i&&(l=i.getUTCFullYear()===r&&i.getUTCMonth()+1===t),t=parseInt(t),r=parseInt(r);var g=document.getElementById(n);removeChildren(g);var f=document.createElement("table");quickElement("caption",f,e.monthsOfYear[t-1]+" "+r);for(var y=quickElement("tbody",f),m=quickElement("tr",y),x=0;x<7;x++)quickElement("th",m,e.daysOfWeek[(x+e.firstDayOfWeek)%7]);var p=new Date(r,t-1,1-e.firstDayOfWeek).getDay(),w=e.getDaysInMonth(t,r);for(m=quickElement("tr",y),x=0;x<p;x++)quickElement("td",m," ").className="nonday";var M=1;for(x=p;M<=w;x++){x%7==0&&1!==M&&(m=quickElement("tr",y)),d=M===u&&t===c&&r===h?"today":"",l&&M===i.getUTCDate()&&(""!==d&&(d+=" "),d+="selected");var k=quickElement("td",m,"","class",d);quickElement("a",k,M,"href","#").addEventListener("click",o(r,t)),M++}for(;m.childNodes.length<7;)quickElement("td",m," ").className="nonday";g.appendChild(f)}};t.prototype={drawCurrent:function(){e.draw(this.currentMonth,this.currentYear,this.div_id,this.callback,this.selected)},drawDate:function(t,e,r){this.currentMonth=t,this.currentYear=e,r&&(this.selected=r),this.drawCurrent()},drawPreviousMonth:function(){1===this.currentMonth?(this.currentMonth=12,this.currentYear--):this.currentMonth--,this.drawCurrent()},drawNextMonth:function(){12===this.currentMonth?(this.currentMonth=1,this.currentYear++):this.currentMonth++,this.drawCurrent()},drawPreviousYear:function(){this.currentYear--,this.drawCurrent()},drawNextYear:function(){this.currentYear++,this.drawCurrent()}},window.Calendar=t,window.CalendarNamespace=e}();