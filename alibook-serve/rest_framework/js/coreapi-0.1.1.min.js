!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).coreapi=t()}}(function(){return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return o(r||t)},h,h.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.username,n=e.password,o=window.btoa(r+":"+n);this.auth="Basic "+o}return n(t,[{key:"authenticate",value:function(t){return t.headers.Authorization=this.auth,t}}]),t}();e.exports={BasicAuthentication:o}},{}],2:[function(t,e,r){"use strict";var n=t("./basic"),o=t("./session"),i=t("./token");e.exports={BasicAuthentication:n.BasicAuthentication,SessionAuthentication:o.SessionAuthentication,TokenAuthentication:i.TokenAuthentication}},{"./basic":1,"./session":3,"./token":4}],3:[function(t,e,r){"use strict";function n(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=t("../utils"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.csrfToken=function(t,e){if((e=e||window.document.cookie)&&""!==e)for(var r=e.split(";"),o=0;o<r.length;o++){var i=n(r[o]);if(i.substring(0,t.length+1)===t+"=")return decodeURIComponent(i.substring(t.length+1))}return null}(e.csrfCookieName,e.cookieString),this.csrfHeaderName=e.csrfHeaderName}return o(t,[{key:"authenticate",value:function(t){return t.credentials="same-origin",this.csrfToken&&!i.csrfSafeMethod(t.method)&&(t.headers[this.csrfHeaderName]=this.csrfToken),t}}]),t}();e.exports={SessionAuthentication:s}},{"../utils":15}],4:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.token=e.token,this.scheme=e.scheme||"Bearer"}return n(t,[{key:"authenticate",value:function(t){return t.headers.Authorization=this.scheme+" "+this.token,t}}]),t}();e.exports={TokenAuthentication:o}},{}],5:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("./document"),i=t("./codecs"),s=t("./errors"),a=t("./transports"),u=t("./utils"),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r={auth:e.auth||null,headers:e.headers||{},requestCallback:e.requestCallback,responseCallback:e.responseCallback};this.decoders=e.decoders||[new i.CoreJSONCodec,new i.JSONCodec,new i.TextCodec],this.transports=e.transports||[new a.HTTPTransport(r)]}return n(t,[{key:"action",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=function(t,e){var r=!0,n=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;if(void 0===(t=t instanceof o.Document?t.content[c]:t[c]))throw new s.LinkLookupError("Invalid link lookup: "+JSON.stringify(e))}}catch(t){n=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw i}}if(!(t instanceof o.Link))throw new s.LinkLookupError("Invalid link lookup: "+JSON.stringify(e));return t}(t,e);return u.determineTransport(this.transports,n.url).action(n,this.decoders,r)}},{key:"get",value:function(t){var e=new o.Link(t,"get");return u.determineTransport(this.transports,t).action(e,this.decoders)}}]),t}();e.exports={Client:c}},{"./codecs":7,"./document":10,"./errors":11,"./transports":14,"./utils":15}],6:[function(t,e,r){"use strict";function n(t){return t.match(/__(type|meta)$/)?t.substring(1):t}function o(t,e){var r=t[e];return"string"==typeof r?r:""}function i(t,e){var r=t[e];return"boolean"==typeof r&&r}function s(t,e){var r=t instanceof Object&&!(t instanceof Array);if(r&&"document"===t._type){var a=function(t,e){var r=t[e];return"object"===(void 0===r?"undefined":u(r))?r:{}}(t,"_meta"),f=o(a,"url"),l=f?h(f,e).toString():"",p=o(a,"title"),d=o(a,"description"),y=function(t,e){var r=["_type","_meta"],o={};for(var i in t)if(t.hasOwnProperty(i)&&!r.includes(i)){var a=n(i),u=s(t[i],e);o[a]=u}return o}(t,l);return new c.Document(l,p,d,y)}if(r&&"link"===t._type){for(var v=o(t,"url"),m=v?h(v,e).toString():"",b=o(t,"action")||"get",w=o(t,"title"),g=o(t,"description"),T=function(t,e){var r=t[e];return r instanceof Array?r:[]}(t,"fields"),k=[],x=0,O=T.length;x<O;x++){var C=T[x],E=o(C,"name"),A=i(C,"required"),_=o(C,"location"),j=o(C,"fieldDescription"),P=new c.Field(E,A,_,j);k.push(P)}return new c.Link(m,b,"application/json",k,w,g)}if(r){var S={};for(var U in t)t.hasOwnProperty(U)&&(S[U]=s(t[U],e));return S}if(t instanceof Array){for(var B=[],q=0,D=t.length;q<D;q++)B.push(s(t[q],e));return B}return t}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=t("../document"),h=t("url-parse"),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType="application/coreapi+json"}return a(t,[{key:"decode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t;return void 0!==e.preloaded&&e.preloaded||(r=JSON.parse(t)),s(r,e.url)}}]),t}();e.exports={CoreJSONCodec:f}},{"../document":10,"url-parse":19}],7:[function(t,e,r){"use strict";var n=t("./corejson"),o=t("./json"),i=t("./text");e.exports={CoreJSONCodec:n.CoreJSONCodec,JSONCodec:o.JSONCodec,TextCodec:i.TextCodec}},{"./corejson":6,"./json":8,"./text":9}],8:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType="application/json"}return n(t,[{key:"decode",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return JSON.parse(t)}}]),t}();e.exports={JSONCodec:o}},{}],9:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mediaType="text/*"}return n(t,[{key:"decode",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t}}]),t}();e.exports={TextCodec:o}},{}],10:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.exports={Document:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,t),this.url=e,this.title=r,this.description=o,this.content=i},Link:function t(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";if(n(this,t),void 0===e)throw new Error("url argument is required");if(void 0===r)throw new Error("method argument is required");this.url=e,this.method=r,this.encoding=o,this.fields=i,this.title=s,this.description=a},Field:function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(n(this,t),void 0===e)throw new Error("name argument is required");this.name=e,this.required=r,this.location=o,this.description=i}}},{}],11:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(t){function e(t){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.message=t,r.name="ParameterError",r}return i(e,Error),e}(),a=function(t){function e(t){n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.message=t,r.name="LinkLookupError",r}return i(e,Error),e}(),u=function(t){function e(t,r){n(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.message=t,i.content=r,i.name="ErrorMessage",i}return i(e,Error),e}();e.exports={ParameterError:s,LinkLookupError:a,ErrorMessage:u}},{}],12:[function(t,e,r){"use strict";var n=t("./auth"),o=t("./client"),i=t("./codecs"),s=t("./document"),a=t("./errors"),u=t("./transports"),c=t("./utils"),h={Client:o.Client,Document:s.Document,Link:s.Link,auth:n,codecs:i,errors:a,transports:u,utils:c};e.exports=h},{"./auth":2,"./client":5,"./codecs":7,"./document":10,"./errors":11,"./transports":14,"./utils":15}],13:[function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t("isomorphic-fetch"),i=t("../errors"),s=t("../utils"),a=t("url-parse"),u=t("url-template"),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemes=["http","https"],this.auth=e.auth||null,this.headers=e.headers||{},this.fetch=e.fetch||o,this.FormData=e.FormData||window.FormData,this.requestCallback=e.requestCallback,this.responseCallback=e.responseCallback}return n(t,[{key:"buildRequest",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.fields,o=t.method.toUpperCase(),s={},c={},h={},f=[],l=!1,p=0,d=n.length;p<d;p++){var y=n[p];if(r.hasOwnProperty(y.name))f.push(y.name),"query"===y.location?s[y.name]=r[y.name]:"path"===y.location?c[y.name]=r[y.name]:"form"===y.location?(h[y.name]=r[y.name],l=!0):"body"===y.location&&(h=r[y.name],l=!0);else if(y.required)throw new i.ParameterError('Missing required field: "'+y.name+'"')}for(var v in r)if(r.hasOwnProperty(v)&&!f.includes(v))throw new i.ParameterError('Unknown parameter: "'+v+'"');var m={method:o,headers:{}};if(Object.assign(m.headers,this.headers),l)if("application/json"===t.encoding)m.body=JSON.stringify(h),m.headers["Content-Type"]="application/json";else if("multipart/form-data"===t.encoding){var b=new this.FormData;for(var w in h)b.append(w,h[w]);m.body=b}else if("application/x-www-form-urlencoded"===t.encoding){var g=[];for(var T in h){var k=encodeURIComponent(T),x=encodeURIComponent(h[T]);g.push(k+"="+x)}g=g.join("&"),m.body=g,m.headers["Content-Type"]="application/x-www-form-urlencoded"}this.auth&&(m=this.auth.authenticate(m));var O=u.parse(t.url);return O=O.expand(c),(O=new a(O)).set("query",s),{url:O.toString(),options:m}}},{key:"action",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.responseCallback,o=this.buildRequest(t,e,r);return this.requestCallback&&this.requestCallback(o),this.fetch(o.url,o.options).then(function(t){if(204!==t.status)return function(t,e,r){return t.text().then(function(n){r&&r(t,n);var o=t.headers.get("Content-Type"),i=s.negotiateDecoder(e,o),a={url:t.url};return i.decode(n,a)})}(t,e,n).then(function(e){if(t.ok)return e;var r=t.status+" "+t.statusText,n=new i.ErrorMessage(r,e);return Promise.reject(n)})})}}]),t}();e.exports={HTTPTransport:c}},{"../errors":11,"../utils":15,"isomorphic-fetch":16,"url-parse":19,"url-template":21}],14:[function(t,e,r){"use strict";var n=t("./http");e.exports={HTTPTransport:n.HTTPTransport}},{"./http":13}],15:[function(t,e,r){"use strict";var n=t("url-parse");e.exports={determineTransport:function(t,e){var r=new n(e).protocol.replace(":",""),o=!0,i=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var c=a.value;if(c.schemes.includes(r))return c}}catch(t){i=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}throw Error("Unsupported scheme in URL: "+e)},negotiateDecoder:function(t,e){if(void 0===e||null===e)return t[0];var r=e.toLowerCase().split(";")[0].trim(),n=[r,r.split("/")[0]+"/*","*/*"],o=!0,i=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(o=(a=u.next()).done);o=!0){var c=a.value;if(n.includes(c.mediaType))return c}}catch(t){i=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}throw Error("Unsupported media in Content-Type header: "+e)},csrfSafeMethod:function(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}}},{"url-parse":19}],16:[function(t,e,r){t("whatwg-fetch"),e.exports=self.fetch.bind(self)},{"whatwg-fetch":22}],17:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty;r.stringify=function(t,e){var r=[];"string"!=typeof(e=e||"")&&(e="?");for(var o in t)n.call(t,o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r.length?e+r.join("&"):""},r.parse=function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]));return n}},{}],18:[function(t,e,r){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}],19:[function(t,e,r){"use strict";function n(t){var e=u.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);var u,h,f,l,p,d,y=c.slice(),v=typeof e,m=0;for("object"!==v&&"string"!==v&&(r=e,e=null),r&&"function"!=typeof r&&(r=a.parse),e=s(e),u=!(h=n(t||"")).protocol&&!h.slashes,this.slashes=h.slashes||u&&e.slashes,this.protocol=h.protocol||e.protocol||"",t=h.rest,h.slashes||(y[2]=[/(.*)/,"pathname"]);m<y.length;m++)f=(l=y[m])[0],d=l[1],f!=f?this[d]=t:"string"==typeof f?~(p=t.indexOf(f))&&("number"==typeof l[2]?(this[d]=t.slice(0,p),t=t.slice(p+l[2])):(this[d]=t.slice(p),t=t.slice(0,p))):(p=f.exec(t))&&(this[d]=p[1],t=t.slice(0,p.index)),this[d]=this[d]||(u&&l[3]?e[d]||"":""),l[4]&&(this[d]=this[d].toLowerCase());r&&(this.query=r(this.query)),u&&e.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==e.pathname)&&(this.pathname=function(t,e){for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(i=!0),r.splice(n,1),s--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(this.pathname,e.pathname)),i(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(l=this.auth.split(":"),this.username=l[0]||"",this.password=l[1]||""),this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var i=t("requires-port"),s=t("./lolcation"),a=t("querystringify"),u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,c=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]];o.prototype.set=function(t,e,r){switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||a.parse)(e)),this[t]=e;break;case"port":this[t]=e,i(e,this.protocol)?e&&(this.host=this.hostname+":"+e):(this.host=this.hostname,this[t]="");break;case"hostname":this[t]=e,this.port&&(e+=":"+this.port),this.host=e;break;case"host":this[t]=e,/:\d+$/.test(e)?(e=e.split(":"),this.port=e.pop(),this.hostname=e.join(":")):(this.hostname=e,this.port="");break;case"protocol":this.protocol=e.toLowerCase(),this.slashes=!r;break;case"pathname":this.pathname=e.length&&"/"!==e.charAt(0)?"/"+e:e;break;default:this[t]=e}for(var n=0;n<c.length;n++){var o=c[n];o[4]&&(this[o[1]]=this[o[1]].toLowerCase())}return this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},o.prototype.toString=function(t){t&&"function"==typeof t||(t=a.stringify);var e,r=this.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var n=r+(this.slashes?"//":"");return this.username&&(n+=this.username,this.password&&(n+=":"+this.password),n+="@"),n+=this.host+this.pathname,(e="object"==typeof this.query?t(this.query):this.query)&&(n+="?"!==e.charAt(0)?"?"+e:e),this.hash&&(n+=this.hash),n},o.extractProtocol=n,o.location=s,o.qs=a,e.exports=o},{"./lolcation":20,querystringify:17,"requires-port":18}],20:[function(t,e,r){(function(r){"use strict";var n,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i={hash:1,query:1};e.exports=function(e){e=e||r.location||{},n=n||t("./");var s,a={},u=typeof e;if("blob:"===e.protocol)a=new n(unescape(e.pathname),{});else if("string"===u){a=new n(e,{});for(s in i)delete a[s]}else if("object"===u){for(s in e)s in i||(a[s]=e[s]);void 0===a.slashes&&(a.slashes=o.test(e.href))}return a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":19}],21:[function(t,e,r){!function(t,n){"object"==typeof r?e.exports=n():t.urltemplate=n()}(this,function(){function t(){}return t.prototype.encodeReserved=function(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")},t.prototype.encodeUnreserved=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},t.prototype.encodeValue=function(t,e,r){return e="+"===t||"#"===t?this.encodeReserved(e):this.encodeUnreserved(e),r?this.encodeUnreserved(r)+"="+e:e},t.prototype.isDefined=function(t){return void 0!==t&&null!==t},t.prototype.isKeyOperator=function(t){return";"===t||"&"===t||"?"===t},t.prototype.getValues=function(t,e,r,n){var o=t[r],i=[];if(this.isDefined(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),n&&"*"!==n&&(o=o.substring(0,parseInt(n,10))),i.push(this.encodeValue(e,o,this.isKeyOperator(e)?r:null));else if("*"===n)Array.isArray(o)?o.filter(this.isDefined).forEach(function(t){i.push(this.encodeValue(e,t,this.isKeyOperator(e)?r:null))},this):Object.keys(o).forEach(function(t){this.isDefined(o[t])&&i.push(this.encodeValue(e,o[t],t))},this);else{var s=[];Array.isArray(o)?o.filter(this.isDefined).forEach(function(t){s.push(this.encodeValue(e,t))},this):Object.keys(o).forEach(function(t){this.isDefined(o[t])&&(s.push(this.encodeUnreserved(t)),s.push(this.encodeValue(e,o[t].toString())))},this),this.isKeyOperator(e)?i.push(this.encodeUnreserved(r)+"="+s.join(",")):0!==s.length&&i.push(s.join(","))}else";"===e?this.isDefined(o)&&i.push(this.encodeUnreserved(r)):""!==o||"&"!==e&&"?"!==e?""===o&&i.push(""):i.push(this.encodeUnreserved(r)+"=");return i},t.prototype.parse=function(t){var e=this,r=["+","#",".","/",";","?","&"];return{expand:function(n){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(t,o,i){if(o){var s=null,a=[];if(-1!==r.indexOf(o.charAt(0))&&(s=o.charAt(0),o=o.substr(1)),o.split(/,/g).forEach(function(t){var r=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);a.push.apply(a,e.getValues(n,s,r[1],r[2]||r[3]))}),s&&"+"!==s){var u=",";return"?"===s?u="&":"#"!==s&&(u=s),(0!==a.length?s:"")+a.join(u)}return a.join(",")}return e.encodeReserved(i)})}}},new t})},{}],22:[function(t,e,r){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(p.arrayBuffer&&p.blob&&y(t))this._bodyArrayBuffer=u(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!v(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer){var e=new Uint8Array(this._bodyArrayBuffer),r=String.fromCharCode.apply(null,e);return Promise.resolve(r)}if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.arrayBuffer&&(this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),p.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t,e){var r=(e=e||{}).body;if("string"==typeof t)this.url=t;else{if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=function(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function l(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(p.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},v=ArrayBuffer.isView||function(t){return t&&d.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},p.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},c.call(h.prototype),c.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];l.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=h,t.Response=l,t.fetch=function(t,e){return new Promise(function(r,n){var i=new h(t,e),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new o;return t.split("\r\n").forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;r(new l(e,t))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&p.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}]},{},[12])(12)});