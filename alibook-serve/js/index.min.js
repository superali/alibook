function load_json_data(e,o){var a="";$.ajax({url:"/api/posts/cat/",method:"GET",success:function(t){a='<option value="">'+e+"</option>",$.each(t,function(t,n){"category"==e?"0"==n.parent_code&&(a+='<option value="'+n.code+'">'+n.name+"</option>"):n.parent_code==o&&(a+='<option value="'+n.code+'">'+n.name+"</option>")}),$("#"+e).html(a)},error:function(e){console.log("error"),console.log(e)}})}function load_json_data_create(e,o){var a="";$.ajax({url:"/api/posts/cat/",method:"GET",success:function(t){a='<option value="">All</option>',$.each(t,function(t,n){"id_category"==e?"0"==n.parent_code&&(a+='<option value="'+n.code+'">'+n.name+"</option>"):n.parent_code==o&&(a+='<option value="'+n.code+'">'+n.name+"</option>")}),$("#"+e).html(a)},error:function(e){console.log("error"),console.log(e)}})}function load_json_data_add_post(e,o){var a="";$.ajax({url:"/api/posts/cat/",method:"GET",success:function(t){a='<option value="">All</option>',$.each(t,function(t,n){"product_category"==e?"0"==n.parent_code&&(a+='<option value="'+n.code+'">'+n.name+"</option>"):n.parent_code==o&&(a+='<option value="'+n.code+'">'+n.name+"</option>")}),$("#"+e).html(a)},error:function(e){console.log("error"),console.log(e)}})}function getParameterByname(e,o){o||(o=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(o);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function loadTweetContainer(o,a){function t(e,o){var a;a=function(e){var o,a="",t="",n="",i="";return e.is_owner&&(t="<a class='btn btn-primary' href='"+E+"posts/"+e.pk+"/update/'>Edit</a><a class='btn btn-danger' href='"+E+"posts/"+e.pk+"/delete/"+e.page.name+"/'>Delete</a>"),e.image?(a="<img src='"+e.image+"' id='post-img' class=' img-responsive'>",n="image-url='"+e.image+"'",e.image2&&(n+="image2-url='"+e.image2+"'"),e.image3&&(n+="image3-url='"+e.image3+"'"),e.image4&&(n+="image4-url='"+e.image4+"'")):a="<img src='"+e.image+"' id='post-img' class=' img-responsive'>",x?(e.country&&(i+=e.country),e.city&&(i+="  "+e.city),e.street&&(i+="  "+e.street),o="<div class='col-md-4 col-sm-6 col-xs-12 padleft-right'><figure class='imghvr-fold-up'>"+a+"<figcaption><h3>"+e.name+"</h3><p>"+e.description+"</p><p>"+i+"</p><p>Phone : "+e.phone+"</p></figcaption><a href='"+E+e.name+"'></a></figure></div>"):(e.page.country&&(i+=e.page.country),e.page.city&&(i+="  "+e.page.city),e.page.street&&(i+="  "+e.page.street),o="<div class='col-md-4 col-sm-6 col-xs-12 padleft-right'><figure class='imghvr-fold-up'>"+a+"<figcaption><h3>"+e.price+" "+e.currency+" </h3><p>"+e.content+"</p><p>"+e.description+"</p><p>Product Code : "+e.pk+"</p>"+i+"</p</figcaption><a href='"+E+e.page.name+"'></a></figure>"+t+"<a   class= 'btn btn-primary showslide'"+n+"'>Preview</a> </div>"),o}(e),1==o?r.prepend(a):r.append(a)}function n(e){var o;o=e||s,$.ajax({url:o,data:{content:l,category:d,subcategory:g,brand:m,price:h,cat:u,country:f,city:_,page_type:y,desc:b,use:p,code:j,street:w,gender:v},method:"GET",success:function(e){c=e.results,e.next?i=e.next:$("#loadmore").css("display","none"),c[0]&&(x=!!c[0].is_page),0==c?r.append("<h2>No Results Found</h2>"):$.each(c,function(e,o){t(o)})},error:function(e){console.log("error"),console.log(e)}})}var i,r,c=[],s=(r=o?$("#"+o):$("#posts-container")).attr("data-url")||"/api/posts/",l="",p="",d="",u="",g="",m="",h="",v="",_="",f="",y="",b="",j="",w="",x=!1,B=window.location,E=B.protocol+"//"+B.host+"/"+B.pathname.split("/")[0];n(),$("#loadmore").click(function(e){e.preventDefault(),i&&n(i)}),$("#search-shop").submit(function(e){e.preventDefault(),d=$("#search-shop #category").val(),g=$("#search-shop #subcategory").val(),m=$("#search-shop #brand").val(),v=$("#search-shop #id_gender").val(),p=$("#search-shop #id_use").val(),l=$("#search-shop #id_content").val(),h=$("#search-shop #id_price").val(),j=$("#search-shop #id_code").val(),w=$("#search-shop #id_street").val(),b=$("#search-shop #id_page_name").val(),u=$("#search-shop #id_cat").val(),f=$("#search-shop #id_country").val(),_=$("#search-shop #id_city").val(),y=$("#search-shop #id_page_type").val(),console.log("category"),console.log(d),r.empty(),n()}),$(document).on("click",".showslide",function(o){o.preventDefault(),e=$(this),$("#slider-images").empty(),$("#slider-images").append('<div class="item active"><img id="firsts" alt=""/></div>'),$("#firsts").attr("src",e.attr("image-url")),e.attr("image2-url")&&$("#slider-images").append("<div class='item'><img src='"+e.attr("image2-url")+"' alt=''/></div>"),e.attr("image3-url")&&$("#slider-images").append("<div class='item'><img src='"+e.attr("image3-url")+"' alt=''/></div>"),e.attr("image4-url")&&$("#slider-images").append("<div class='item'><img src='"+e.attr("image4-url")+"' alt=''/></div>"),$("#slidemodel").modal("show")})}$(document).on("change","#category",function(){var e=$(this).val();""!=e?load_json_data("subcategory",e):($("#subcategory").html('<option value=""> subcategory</option>'),$("#brand").html('<option value=""> Brand</option>'))}),$(document).on("change","#subcategory",function(){var e=$(this).val();""!=e?load_json_data("brand",e):$("#brand").html('<option value="">Select Brand</option>')}),$(document).on("change","#id_category",function(){var e=$(this).val();""!=e?load_json_data_create("id_subcategory",e):($("#id_subcategory").html('<option value=""> subcategory</option>'),$("#id_brand").html('<option value=""> Brand</option>'))}),$(document).on("change","#id_subcategory",function(){var e=$(this).val();""!=e?load_json_data_create("id_brand",e):$("#id_brand").html('<option value="">Select Brand</option>')}),$(document).on("change","#product_category",function(){var e=$(this).val();""!=e?load_json_data_add_post("product_subcategory",e):($("#product_subcategory").html('<option value=""> subcategory</option>'),$("#post_brand").html('<option value=""> Brand</option>'))}),$(document).on("change","#product_subcategory",function(){var e=$(this).val();""!=e?load_json_data_add_post("post_brand",e):$("#post_brand").html('<option value="">Select Brand</option>')});